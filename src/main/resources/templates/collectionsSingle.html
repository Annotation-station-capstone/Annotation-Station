<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:include="partials/head :: headStylesheets">
    <!--<head>-->
    <meta charset="UTF-8">
    <title>collections fragment</title>
</head>

<body>
<nav th:replace="partials/header :: navbar"></nav>
<div sec:authorize="!isAuthenticated()"
     class="modal fade"
     id="registerModal"
     tabindex="-1"
     aria-labelledby="registrationModalLabel"
     aria-hidden="true"
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">

                <h5 class="modal-title" id="registrationModalLabel" style="text-align: center">Register</h5>
                <button
                        type="button"
                        class="btn-close"
                        data-mdb-dismiss="modal"
                        aria-label="Close"
                ></button>
            </div>
        </div>
    </div>
</div>


<div class="mt-3 shadow-4 rounded-3">
    <h1 class="personalcollectionbanner text-center "><span
            id="collectionTitle"></span> collection, created by: <span id="collectionOwner"></span> </h1>
<!--        <h1 class="personalcollectionbanner text-center "><span id="bannerUser"></span>, here is your collection: <span-->
<!--            id="collectionTitle"></span></h1>-->

    <div class="row">

        <img src="" id="collectionImage" class="col-3" alt="collection-image">
        <h4 id="collectionDescription" class="col-5"></h4>

    </div>
</div>
<!--<div class="row">-->
<!--&lt;!&ndash;    <div class="col-1"></div>&ndash;&gt;-->
<!--    <div class="col-3">-->
<!--        <div style="margin: 10px">-->
<!--            <img id="collection_image" alt="" src="">-->
<!--        </div>-->
<!--    </div>-->

<!--    <div class="col-4">-->
<!--        <div class="row">-->
<!--            <h3 class="title-header title"></h3>-->
<!--        </div>-->
<!--        <div class="row">-->
<!--            <ul id="collection-data"></ul>-->
<!--        </div>-->
<!--    </div>-->
<!--&lt;!&ndash;    <div class="col-1"></div>&ndash;&gt;-->
<!--</div>-->

<div>
    <div id="accordionExample" style=" width: 100%">
        <div id="section-data"></div>
        <div id="delete"></div>
    </div>
</div>


<!--<h1>Edit this collection</h1>-->
<!--<form th:action="@{/collections/edit}" th:method="GET" >-->
<!--    <input type="hidden" name="id" th:value="${param.collection_id}">-->
<!--    <input type="submit" name="edit" placeholder="edit">-->
<!--</form>-->

<!--<h1>Delete this collection</h1>-->
<!--<form th:action="@{/collections/delete}" th:method="POST" >-->
<!--    <input type="hidden" name="id" th:value="${param.collection_id}">-->
<!--        <input type="submit" name="delete" placeholder="delete">-->
<!--</form>-->
<h5 class="mt-5">Comments:</h5>
<div class="comment-card p-3 " th:each="comments : ${comments}">
    <div class="d-flex justify-content-between align-items-center">
        <div class="user d-flex flex-row align-items-center"><span><small class="font-weight-bold text-dark"
                                                                          th:text="${comments.user.username}"></small> <small
                class="font-weight-bold" th:text="${comments.getComment()}"></small></span></div>
    </div>
</div>




<!--<div   th:each="comments : ${comments}">-->


<!--    <strong><p th:text="${comments.user.username}"></p></strong>-->
<!--    <p th:text="${comments.getComment()}"></p>-->
<!--</div>-->



<form th:action="@{/comment/add}" th:method="POST">


    <input class="mt-4" id="commentInput" type="hidden" name="collectionId" th:value="${param.collection_id}">

    <label>
        <input class="mt-4" id="commentDisabled" disabled placeholder="Must be logged in to make a comment"
               sec:authorize="!isAuthenticated()">
    </label>

    <label>
    <textarea class="commentTextarea mt-4" rows="2" cols="50" name="comment" placeholder="Type comment here" sec:authorize="isAuthenticated()">
</textarea>
    </label>
    <br>
    <!--    <button type="button" th:href="@{/}" sec:authorize="!isAuthenticated()" >Login</button>-->
    <!--    <label>-->
    <!--        <input name="comment" placeholder="Type comment here" sec:authorize="isAuthenticated()">-->
    <!--    </label>-->

    <input class="mb-3" type="submit" sec:authorize="isAuthenticated()">


</form>
<!--<div th:replace="partials/comment :: commentForm"></div>-->

<!--<div th:if="${currentUserId == param.collection_Id}">-->
<!--    <h3>Delete this collection</h3>-->
<!--    <form th:action="@{/collections/delete}" th:method="POST" >-->
<!--        <input type="hidden" name="id" th:value="${param.collection_id}">-->
<!--        <input type="submit" name="delete" placeholder="delete">-->
<!--    </form>-->
<hr>
<div class="row">
    <ul id="comment-data"></ul>
</div>


<!--<div class="accordion" id="accordionExample">-->
<!--    <div class="accordion-item">-->
<!--        <h2 class="accordion-header" id="headingOne">-->
<!--            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">-->
<!--                Accordion Item #1-->
<!--            </button>-->
<!--        </h2>-->
<!--        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">-->
<!--            <div class="accordion-body">-->
<!--                <strong>This is the first item's accordion body.</strong> It is shown by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<a data-target="#demo" data-toggle="collapse">-->
<!--    CLICKABLE TEXT WOULD GO HERE INSTEAD OF BUTTON-->
<!--</a>-->

<!--<div class="collapse out" id="demo">-->
<!--    <p>-->
<!--        Hidden Content goes here.-->
<!--    </p>-->
<!--</div>-->


<!--<script src="https://code.jquery.com/jquery-3.6.0.js"-->
<!--        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="-->
<!--        crossorigin="anonymous"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"-->
<!--        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"-->
<!--        crossorigin="anonymous"></script>-->
<!--&lt;!&ndash;<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>&ndash;&gt;-->
<!--<script src="https://apis.google.com/js/platform.js" async defer></script>-->
<!--<script src="https://apis.google.com/js/api.js"></script>-->
<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"></script>-->
<script th:inline="javascript">
    let currentUserId = /*[[${currentUserId}]]*/ 0;
</script>
<footer th:include="partials/footer :: footer"></footer>
<script src="/js/collection_fragment.js" rel="script"></script>
<script src="/js/profilefragment.js" rel="script"></script>
<script src="/js/carouselFragment.js" rel="script"></script>

</body>

</html>